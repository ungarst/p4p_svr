<div ng-controller="BudgetingCtrl" class="container">
  <div class="row-fluid">
    <div class="span3">
      <div ng-include="'static/partials/sidebar.html'"></div>
    </div><!--/span-->
    <div class="span9">
      <h1>Budgeting</h1>
      <h3 ng-show="catch_all_not_set">You haven't set a monthly allowance for all other spending. <span style="color: #428bca;" ng-click="editCatchAll()">Set it now?</span> </h3>
      <h3 ng-show="not_editing_catch_all">You have set <[ user.other_monthly_allowance | currency ]> for all other categories. <span style="color: #428bca;" ng-click="editCatchAll()">Change this?</span></h3>
      <h3 ng-show="editing_catch_all">Allow <input type="text" ng-model="user.other_monthly_allowance" /> for all other categories. <button ng-click="saveCatchAll()">Save</button></h3>
      <ul>
        <li ng-repeat="spending_category in spending_categories">
          <h3><[ spending_category.category_name ]></h3>
          <h5><span class="unemphasis"><[ spending_category.monthly_spend | currency ]></span> of budgeted <span class="unemphasis"><[ spending_category.monthly_allowance |currency ]></span> spent this month</h5>
          <p ng-hide="spending_category.editing" style="color: #428bca;" ng-click="enableEditing(spending_category)">Change budgeted amount</p>
          <div ng-show="spending_category.editing">
            <p>Allow <input type="text" ng-model="spending_category.monthly_allowance"/> per month for this category.<button ng-click="updateAllowance(spending_category)">Save</button></p></div>
        </li>
      </ul>
    </div>
  <hr />
</div>